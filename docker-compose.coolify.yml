version: '3.9'

# =============================================================================
# STREAMSIDE LIVEKIT - FOR COOLIFY
# =============================================================================
# SETUP:
# 1. SSH to server: mkdir -p /opt/livekit
# 2. Create /opt/livekit/config.yaml with content below
# 3. Open ports: 7880,7881/tcp and 3478,50000-60000/udp
# 4. Deploy this compose in Coolify
# =============================================================================

services:
  livekit:
    image: livekit/livekit-server:latest
    container_name: livekit-server
    restart: unless-stopped
    network_mode: host
    volumes:
      - /opt/livekit/config.yaml:/config.yaml:ro
    command: ["--config", "/config.yaml"]

# =============================================================================
# /opt/livekit/config.yaml content (create on server):
# -----------------------------------------------------------------------------
# port: 7880
# bind_addresses:
#   - "0.0.0.0"
# rtc:
#   port_range_start: 50000
#   port_range_end: 60000
#   use_external_ip: true
#   tcp_port: 7881
# turn:
#   enabled: true
#   udp_port: 3478
# keys:
#   APIStreamside: YOUR_SECRET_HERE
# room:
#   auto_create: true
#   empty_timeout: 300
#   max_participants: 50
# logging:
#   level: info
# =============================================================================
